checkout:
  post:
    - git submodule sync
    - git submodule update --init

dependencies:
  pre:
    - |
      [[ -d ./node_modules/eslint ]] || npm install eslint
    - |
      [[ -d ./node_modules/eslint-plugin-promise ]] || npm i eslint-plugin-promise@latest --save-dev
    - |
      [[ -d ./node_modules/eslint-config-standard ]] || npm i eslint-config-standard@latest --save-dev
    - |
      [[ -d ./node_modules/eslint-plugin-standard ]] || npm i eslint-plugin-standard@latest --save-dev

  cache_directories:
    - "node_modules"

test:
  pre:
    - ./node_modules/.bin/eslint ./src/apps/*/*.js
    - ./node_modules/.bin/eslint ./src/apps/browserphone/submodules/*/*.js
    - ./node_modules/.bin/eslint ./src/apps/common/submodules/*/*.js
    - ./node_modules/.bin/eslint ./src/apps/myaccount/submodules/*/*.js
